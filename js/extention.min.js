function check_detail(a){$("#detail_"+a).toggle()}
function mode_history(){$.post("db/retrive_order.php",{userid:$.cookie("user_id")},function(a){var b=$.parseJSON(a);console.log(b);$("body").append('<div class="order_history" style="top:80px; left:20%; position:absolute" ><p align="center" style="font-size:20px;"><strong>\u8a02\u55ae\u8a18\u9304</strong></p><table width="800" border="0" align="center" cellpadding="0" cellspacing="0" id="table_sty"><tr><td width="28%" class="title">\u7de8\u865f</td><td width="27%" class="title">\u6642\u9593</td><td width="10%" class="title">\u6578\u91cf</td><td width="10%" class="title">\u5df2\u4ed8\u6b3e</td><td width="15%" class="title">\u4fe1\u7528\u5361</td><td width="10%" class="title"> </td></tr></table></div>');$.each(b,
function(a){var g=$.parseJSON(b[a].detail);console.log(g);$("#table_sty").append("<tr><td>"+b[a].order_no+"</td><td>"+b[a].c_time_local+"</td><td>"+g.itemCount+"</td><td>"+b[a].payment+"</td><td>"+g.card_no.replace(/.(?=.{4})/g,"x")+'</td><td><a href="#" onClick="check_detail(\''+b[a].order_no+"')\">\u8a73\u7d30</a></td></tr>");for(var e="",l=1;l<=g.itemCount;l++){var k=g["item_options_"+l].split(",")[0].split(": ")[1],j=g["item_options_"+l].split(",")[1].split(": ")[1],e=e+('<img src="'+k+'" width="40" height="68" align="absmiddle"/> '+
j+", \u55ae\u50f9\uff1a"+g["item_price_"+l]+" x"+g["item_quantity_"+l]+"</img>");0==l%4&&(e+="<br>")}$("#table_sty").append('<tr id="detail_'+b[a].order_no+'" style="display: none"><td colspan="6" style="text-align: left"><br>'+e+"<br><br> \u904b\u9001\u5730\u5740\uff1a "+g.shipping_addr+","+g.shipping_city+","+g.shipping_country+"<br><br>\u6536\u4ef6\u8005\uff1a "+g.shipping_name+"<br><br>email\uff1a "+g.shipping_email+"<br><br></td></tr>")});$("#table_sty").append('<tr><td height="38" class="title">&nbsp;</td><td class="title">&nbsp;</td><td class="title">&nbsp;</td><td class="title">&nbsp;</td><td class="title">&nbsp;</td><td class="title">&nbsp;</td></tr>')})}
function get_time(){var a=new Date,b=a.getDate(),c=a.getMonth()+1,g=a.getFullYear(),e=a.getHours(),l=a.getMinutes(),a=a.getSeconds();return g+"-"+c+"-"+b+" "+e+":"+l+":"+a}function switchNum(a){return a.replace(/(\d)(\d)(\d)(\d)/gi,"$3$4$1$2")}function checkValid(){var a=!0;$(".order :input").each(function(){""==$(this).val()&&"coupon_no"!=$(this).attr("id")&&($(this).after("<span class='fillcheck'><font color='red'>\u8acb\u586b\u5beb\uff01<font></span>"),a=!1)});return a}
function mod_checkout(){$order=$("<div></div>");$order.addClass("order");$order.css("position","absolute");$order.css("top",$(".mainmenu").height()+50+"px");$order.load("checkout/checkout.html?v="+(new Date).getTime(),function(){simpleCart.update();$(".order a.preview").hover(function(a){var b=$(this).parent().offset();$(".order").append("<div id='cvc'><img src='checkout/card.png'/></div>");$("#cvc").css("position","absolute");$("#cvc").css("top",a.pageY-b.top+"px").css("left",a.pageX-b.left+"px").fadeIn("fast")},
function(){$("#cvc").remove()});$(".order a.preview").mousemove(function(a){var b=$(this).parent().offset();$("#cvc").css("top",a.pageY-b.top+"px").css("left",a.pageX-b.left+"px")});$("#checkout_cancel").click(function(){openGallery()});$("#checkout_confirm").click(function(){$(".fillcheck").remove();"\u78ba\u8a8d\u8cc7\u6599"==$("#checkout_confirm").val()&&""!=$("#coupon_no").val()?$.post("checkout/coupon.php",{code:$("#coupon_no").val(),userid:$.cookie("user_id")},function(a){if("ok"==a.result){var b=
parseFloat($(".simpleCart_total").html().replace("$",""),10).toFixed(2);a=(parseFloat($(".simpleCart_quantity").html().replace("$",""),10).toFixed(2)*a.value).toFixed(2);$(".simpleCart_total").html("").fadeIn(300).append("$"+(b-a).toFixed(2).toString());$("#coupon_no").after('<font color="red">\u5df2\u6298\u6263 $'+a+"</font>")}else"used"==a.value?$("#coupon_no").after('<font color="red">\u5df2\u7d93\u88ab\u4f7f\u7528</font>'):"invalid"==a.value?$("#coupon_no").after('<font color="red">\u7121\u6548\u7684\u6298\u6263\u78bc</font>'):
$("#coupon_no").after('<font color="red">\u7a0d\u5f8c\u518d\u8a66</font>');$("#checkout_confirm").val("\u5237\u5361\u4ed8\u6b3e")},"json"):!1!=checkValid()&&(simpleCart({checkout:{type:"SendForm",url:HOST_URL+"checkout/bill.php",success:"index.html?b=succeed",cancel:"index.html?b=cancel",extra_data:{storename:$(".open").html(),userid:$.cookie("user_id"),token:$.cookie("access_token"),type:$.cookie("source"),card_no:$("#card_no").val(),expiry_date:switchNum($("#expiry_date").val()),cvc_no:$("#cvc_no").val(),
coupon_no:$("#coupon_no").val(),total:$(".simpleCart_total").html().replace("$",""),shipping_email:$("#shipping_email").val(),shipping_name:$("#shipping_name").val(),shipping_addr:$("#shipping_address").val(),shipping_city:$("#shipping_city").val(),shipping_country:$("#countrySelect :selected").text(),c_time:get_time()}}}),simpleCart.checkout())})});$("body").append($order)}
function mod_gallery(){$g=$("<div></div>");$("body").append($g);$g.attr("id","gallery");$("#gallery").before('<div class="shopping_cart">\u8cfc\u7269\u8eca<div> ----------- </div><div class="simpleCart_items"></div><div style="float:left">\u7e3d\u8a08\uff1a</div><div class="simpleCart_total"></div></div>');$(".shopping_cart").css("top","100px");$(".shopping_cart").css("left","100px");$("#gallery").before('<div class="shopping_cart2" style="top:80px; left:25%; position:absolute" ><p align="center" style="font-size:20px;"><strong>\u8cfc\u7269\u8eca</strong></p><table width="650" border="0" align="center" cellpadding="0" cellspacing="0" id="table_sty"></table></div>');
simpleCart.bind("update",function(){$("#table_sty").html("");$("#table_sty").append('<tr><td width="5%" class="title">\u3000</td><td width="30%" class="title">\u540d \u7a31</td><td width="20%" class="title">\u50f9 \u683c</td><td width="10%" class="title">\u6578 \u91cf</td><td width="20%" class="title">\u5c0f \u8a08</td><td width="15%" class="title">&nbsp;</td></tr>');$(".itemRow").each(function(){$("#table_sty").append('<tr><td><img src="'+$(this).children(".item-image").html()+'" width="40" height="68" /></td><td>'+
$(this).children(".item-title").html()+"</td><td>US"+$(this).children(".item-price").html()+"</td><td>"+$(this).children(".item-quantity").html()+"</td><td>US"+$(this).children(".item-total").html()+'</td><td><img id="cart2_'+$(this).attr("id")+'" style="cursor:pointer" src="css/images/delete.png" width="18" height="18" /></td></tr>');var a=$(this);$("#cart2_"+$(this).attr("id")).click(function(){a.find(".simpleCart_remove").click()})});$("#table_sty").append('<tr><td height="38" class="title">&nbsp;</td><td class="title">&nbsp;</td><td class="title">&nbsp;</td><td class="title">&nbsp;</td><td class="title">&nbsp;</td><td class="title">&nbsp;</td></tr>');
$("#table_sty").append('<tr><td colspan="4" class="amount">\u7e3d\u8a08 US'+$(".simpleCart_total").html()+'\u3000</td><td style="border-bottom: none;"><div class="checkout">\u7d50\u5e33</div></td></tr>');$(".checkout").click(function(){releasePage("Gallery");newPage("Checkout")});$(".item-decrement").css("padding-right","12px");$(".item-quantity").css("padding-right","12px");$(".headerRow > .item-total").css("padding-left","100px");$("#gallery").css("top",Math.round(parseInt($(".shopping_cart2").css("top")))+
$(".shopping_cart2").height()+50+"px");"$0.00"==$(".simpleCart_total").html()||""==$(".simpleCart_total").html()?$(".checkout").hide():$(".checkout").show()});simpleCart.update();$.cookie("user_id")&&$.post("db/retrive_gallery.php",{userid:$.cookie("user_id")},function(a){$("#gallery").append('<p align="center" style="font-size:20px;"><strong>\u6211\u7684\u8a2d\u8a08</strong></p>');a=$.parseJSON(a);$.each(a,function(a,c){$("#gallery").append('<div class="simpleCart_shelfItem"><div class="list_pic"><img src="'+
c.orig_img+'" alt="image" width="120" height="202"/></div><span class="item_image" style="display:none">'+c.orig_img+'</span><div class="list_txt"><p><strong class="item_title">'+c.title_name+'</strong><span class="item_name" style="display:none">'+c.s_name+"</span></p><p>"+c.phone_type+" / "+c.phone_color+'</p><p><span class="item_price">US$'+c.price+'</span></p><a class="item_add" href="javascript:;"><img src="css/images/add_shoppingcar.png" width="18" height="18" /></a></div>')})})}
function _send_factory(a){releasePage(PAGE);$.post("db/retrive_image_factory.php",{userid:$.cookie("user_id"),s_save:a},function(a){a=$.parseJSON(a);var c=$.parseJSON(a[0].saveimag);_producing_for_factory(c,a[0].phone_type)})}var scaling=3;
function mod_saving(a){function b(){var j=l.get(k++);if($(j).length)$status.css("width",function(){e+=g;return e+"%"}),c.push({cornerId:$(j).attr("id"),cornerClass:$(j).attr("class"),cornerStyle:$(j).attr("style")+" width:"+$(j).css("width")+"; height:"+$(j).css("height"),imgURL:$(j).children(".draggable").data("src"),zdx:$(j).children(".draggable").data("zdx"),zdy:$(j).children(".draggable").data("zdy"),zw:$(j).children(".draggable").data("zw"),zh:$(j).children(".draggable").data("zh")}),setTimeout(b,
10);else{$status.after('<br><span style="font-size: 16px; color: white"> \u4e0a\u50b3\u4e2d...</span>');var h=document.createElement("canvas");_show_save(h);$.post("db/save_image.php",{userid:$.cookie("user_id"),user_type:$.cookie("user_type"),title_name:TITLE_NAME,saveimag:JSON.stringify(c),phone_type:PHONE_NAME,layout_no:LAYOUT_NAME,phone_color:PHONE_COLOR,orig_img:h.toDataURL()},function(){TITLE_NAME="";$(h).attr("id","galleryCanvas");$(h).css("position","absolute");$(h).css("top","80px");$(h).css("left",
"200px");$(h).css("width",Math.round(0.7*$("#mCanvas")[0].width)+"px");$(h).css("height",Math.round(0.7*$("#mCanvas")[0].height)+"px");$("body").append($(h));$("#progress-bar").remove();$("#progress-bar")[0]=null;$wDiv.remove();$wDiv[0]=null;a()})}}$("body").append('<div class="modalOverlay"></div>');$wDiv=$(".modalOverlay");if(0!=$(".canvas_appended").length&&$(".canvas_appended").length==$(".layout_corner").length)if(""==TITLE_NAME)Messi.alert('\u8acb\u8f38\u5165\u540d\u7a31 : <input type="text">',
function(a,b){TITLE_NAME=b;saveImg()},{title:"\u63d0\u9192\u60a8 !",modal:!0}),$wDiv.remove();else{$("body").append('<div id="progress-bar"><div id="status"></div></div>');$("#progress-bar").css("position","fixed");$("#progress-bar").css("z-index","1001");$("#progress-bar").css("top","337px");$("#progress-bar").css("left",layout_ox+40+"px");$status=$("#status");var c=[],g=100/$(".layout_corner").length,e=0,l=$("body").find(".layout_corner"),k=0;b()}else new Messi("<p>\u60a8\u5c1a\u672a\u5b8c\u6210\u8a2d\u8a08\u54e6</p><p>\u8acb\u5148\u5c07\u5716\u7247\u6309\u60a8\u7684\u559c\u597d\u62d6\u62c9\u81f3\u6240\u6709\u7684\u5340\u584a\u5f8c\uff0c\u624d\u80fd\u5132\u5b58</p>",
{title:"\u63d0\u9192\u60a8 !",modal:!0}),$wDiv.remove()}
function _show_save(a){Math.round(parseInt($(".layout_corner").css("border-left-width"),10));var b=a.getContext("2d");$(a).attr("id","galleryCanvas");a.width=Math.round($("#mCanvas")[0].width);a.height=Math.round($("#mCanvas")[0].height);b.drawImage($("#mCanvas")[0],0,0,a.width,a.height);$(".canvas_appended").each(function(){b.drawImage($(this)[0],Math.round(parseInt($(this).css("left"),10))-layout_ox,Math.round(parseInt($(this).css("top"),10))-layout_oy,Math.round(parseInt($(this)[0].width,10)),
Math.round(parseInt($(this)[0].height,10)))})}
function _producing_for_factory(a,b){$("body").append('<div class="modalOverlay"></div>');$wDiv=$(".modalOverlay");$("body").append('<div id="progress-bar"><div id="status"></div></div>');$("#progress-bar").css("position","fixed");$("#progress-bar").css("z-index","1001");$("#progress-bar").css("top","300px");$("#progress-bar").css("left",layout_ox+"px");$status=$("#status");var c=new Image;c.src="images/"+b+"_mask3.png";c.onload=function(){function b(){var a=r[p++];if($(a).length){$status.css("width",
function(){h+=j;return h+"%"});var c=a.cornerStyle.split(";"),q={},s="",t;for(t in c)s=c[t].split(":"),q[$.trim(s[0])]=$.trim(s[1]);var d=$("<div></div>");d.css("position","absolute");d.css("top",Math.round(parseInt(q.top),10)*scaling+"px");d.css("left",Math.round(parseInt(q.left),10)*scaling+"px");d.css("width",Math.round(parseInt(q.width),10)*scaling+"px");d.css("height",Math.round(parseInt(q.height),10)*scaling+"px");d.css("border","6px solid silver");d.addClass(a.cornerClass);d.attr("id",a.cornerId);
$("body").append(d);var m=$("<img/>");m.attr("src",a.imgURL);"undefined"==typeof a.imgURL&&alert(a.cornerId);m.load(function(){var c=new Image;if("undefined"!=typeof a.zdx){m.data("zdx",a.zdx*scaling);m.data("zdy",a.zdy*scaling);m.data("zw",a.zw*scaling);m.data("zh",a.zh*scaling);var e=$("<canvas>"),h=d.clone();e[0].width=parseInt(d.css("width"),10)+parseInt(d.css("border-left-width"),10);e[0].height=parseInt(d.css("height"),10)+parseInt(d.css("border-left-width"),10);autoClipper2(m[0],e,h,d);c.src=
e[0].toDataURL();c.width=e[0].width;c.height=e[0].height}else c.src=m.attr("src");c.onload=function(){0<=d.attr("class").indexOf("layout_circle")?doClipping(doMasking(c,k,d,layout_ox*scaling,layout_oy*scaling),d,cirClipper):0<=d.attr("class").indexOf("layout_square")&&doClipping(doMasking(c,k,d,layout_ox*scaling,layout_oy*scaling),d,boxClipper);l.drawImage(d.next()[0],Math.round(parseInt(d.next().css("left"),10))-layout_ox*scaling,Math.round(parseInt(d.next().css("top"),10))-layout_oy*scaling,Math.round(parseInt(d.next().css("width"),
10)),Math.round(parseInt(d.next().css("height"),10)));d.next().remove();d.next()[0]=null;d.remove();d[0]=null;setTimeout(b,10)}})}else mod_saveremote(e),delete e,e=null,$("#progress-bar").remove(),$("#progress-bar")[0]=null,$wDiv.remove(),$wDiv[0]=null}var e=document.createElement("canvas"),l=e.getContext("2d");e.width=Math.round(c.width);e.height=Math.round(c.height);var k=document.createElement("canvas");k.width=c.width;k.height=c.height;k.getContext("2d").drawImage(c,0,0);var j=100/a.length,h=
0,r=a,p=0;b()}}
function _producing_for_factory_from_layout(a){var b=document.createElement("Canvas");b.setAttribute("id","mCanvas");b.getContext("2d");$(".mainmenu").before(b);$("link[type='text/css']#layout_css").remove();b=jQuery("<link>");b.attr({rel:"stylesheet",type:"text/css",href:"css/"+a.phone_type+"_"+a.layout_no+".css?v="+(new Date).getTime(),id:"layout_css"});$("head").append(b);styleOnload(b[0],function(){var b="js/"+a.phone_type+"_"+a.layout_no+".js?v="+(new Date).getTime();$.getScript(b).done(function(){var b=$.parseJSON(a.saveimag);
$("body").append('<div class="modalOverlay"></div>');$wDiv=$(".modalOverlay");$("body").append('<div id="progress-bar"><div id="status"></div></div>');$("#progress-bar").css("position","fixed");$("#progress-bar").css("z-index","1001");$("#progress-bar").css("top","300px");$("#progress-bar").css("left",layout_ox+"px");$status=$("#status");var c=new Image;c.src="images/"+PHONE_NAME+"_mask3.png";c.onload=function(){function a(){var b=u[v++];if($(b).length){$status.css("width",function(){p+=r;return p+
"%"});var c=b.cornerStyle.split(";"),e={},d="",g;for(g in c)d=c[g].split(":"),e[$.trim(d[0])]=$.trim(d[1]);var f=$("<div></div>");f.css("position","absolute");f.css("top",Math.round(parseInt(e.top),10)*scaling+"px");f.css("left",Math.round(parseInt(e.left),10)*scaling+"px");f.css("width",Math.round(parseInt($("body").find("#"+b.cornerId).css("width")),10)*scaling+"px");f.css("height",Math.round(parseInt($("body").find("#"+b.cornerId).css("height")),10)*scaling+"px");f.css("border","6px solid silver");
f.addClass(b.cornerClass);$("body").append(f);var n=$("<img/>");n.attr("src",b.imgURL);n.load(function(){var c=new Image;if("undefined"!=typeof b.zdx){n.data("zdx",b.zdx*scaling);n.data("zdy",b.zdy*scaling);n.data("zw",b.zw*scaling);n.data("zh",b.zh*scaling);var d=$("<canvas>"),e=f.clone();d[0].width=parseInt(f.css("width"),10)+parseInt(f.css("border-left-width"),10);d[0].height=parseInt(f.css("height"),10)+parseInt(f.css("border-left-width"),10);autoClipper2(n[0],d,e,f);c.src=d[0].toDataURL();c.width=
d[0].width;c.height=d[0].height}else c.src=n.attr("src");c.onload=function(){0<=f.attr("class").indexOf("layout_circle")?doClipping(doMasking(c,h,f,layout_ox*scaling,layout_oy*scaling),f,cirClipper):0<=f.attr("class").indexOf("layout_square")&&doClipping(doMasking(c,h,f,layout_ox*scaling,layout_oy*scaling),f,boxClipper);j.drawImage(f.next()[0],Math.round(parseInt(f.next().css("left"),10))-layout_ox*scaling,Math.round(parseInt(f.next().css("top"),10))-layout_oy*scaling,Math.round(parseInt(f.next().css("width"),
10)),Math.round(parseInt(f.next().css("height"),10)));f.next().remove();f.next()[0]=null;f.remove();f[0]=null;setTimeout(a,10)}})}else mod_saveremote(k),delete k,k=null,$("#progress-bar").remove(),$("#progress-bar")[0]=null,$wDiv.remove(),$wDiv[0]=null}var k=document.createElement("canvas"),j=k.getContext("2d");k.width=Math.round(c.width);k.height=Math.round(c.height);var h=document.createElement("canvas");h.width=c.width;h.height=c.height;h.getContext("2d").drawImage(c,0,0);var r=100/b.length,p=
0,u=b,v=0;a()}}).fail(function(){})})}function mod_saveremote(a){var b=$("<img>");b.attr("id","galleryCanvas");b.css("position","absolute");b.css("top","80px");b.css("left","100px");b.css("width",Math.round(0.7*a.width.width)+"px");b.css("height",Math.round(0.7*a.width.height)+"px");$("body").append(b);$("#galleryCanvas")[0].src=a.toDataURL()}
function setDragObj(a){a.children(".draggable").draggable({scroll:!1,cursor:"auto",cursorAt:{left:35,top:35},revert:"valid",drag:function(){0<=$(this).attr("class").indexOf("ui-draggable-dragging")&&($(this).parent().css("z-index","1000"),$(this).css("opacity","0.7"))},start:function(){disable_scroll();$(this).height($(this).data("oh")).width($(this).data("ow"));$(".layout_corner").css("z-index","998");$(".layout_corner").stop(!0,!0).animate({opacity:1});$(this).data("corner",$(this).parent())},stop:function(){enable_scroll();
0<=$(this).parent().attr("class").indexOf("removed")&&(removeUnclearWarning($(this).parent().attr("id")),clearCorner($(this).parent()))}});a.children(".draggable").css("z-index","");a.removeClass("removed");a.children(".draggable").removeClass("ui-draggable-dragging");a.css("cursor","move");a.css("z-index","998")}
function mod_randesign(){0<$(".layout_corner").children(".spinner").length||(0!=$(".canvas_appended").length?($("body").append('<div class="modalOverlay"></div>'),new Messi("\u60a8\u78ba\u5b9a\u8981\u91cd\u65b0\u96a8\u6a5f\u8a2d\u8a08\u55ce\uff1f\u4e4b\u524d\u7684\u5716\u7247\u5c07\u6703\u88ab\u6e05\u7a7a\uff01",{title:"\u96a8\u6a5f\u8a2d\u8a08",buttons:[{id:0,label:"Yes",val:"Y"},{id:1,label:"No",val:"N"}],callback:function(a){"Y"===a&&_randesign();$(".modalOverlay").remove();$(".layout_corner").animate({opacity:CORNER_OPT})}})):
_randesign())}
function _randesign(){$(".layout_corner").css("opacity",CORNER_OPT);$(".layout_corner").html("");$(".layout_corner > draggable").each(function(){$(this).remove();$(this)[0]=null});$(".canvas_appended").each(function(){$(this).remove();$(this)[0]=null});$(".layout_corner").each(function(){var a=Math.floor(Math.random()*$(".gallery-pool").length);$(this).append($($(".gallery-pool")[a]).clone());$(this).children(".draggable").removeClass("gallery-pool");$(this).children(".draggable").data("oh",Math.round(0.7*
$(".gallery-pool")[a].height));$(this).children(".draggable").data("ow",Math.round(0.7*$(".gallery-pool")[a].width));$(this).children(".draggable").css({position:"relative",top:"0px",left:"0px",width:$(this).css("width"),height:$(this).css("height"),opacity:"0"});var a=100<parseInt($(this).css("width"),10)||100<parseInt($(this).css("height"),10)?$(this).children(".draggable").attr("delay_src_h"):$(this).children(".draggable").attr("src"),b=$(this),c=HOST_URL+TEMP_DIR+a.replace(/\//g,"+");$(this).children(".draggable").data("src",
c);c="#000";"black"==PHONE_COLOR&&(c="#FFF");var g=(new Spinner({lines:13,length:7,width:4,radius:10,corners:1,rotate:0,color:c,speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2E9,top:"auto",left:"auto"})).spin($(this)[0]);$.getImageData({url:a,server:HOST_URL+"proxy/getImageData.php",success:function(a){b.children(".draggable").attr("src",a.src);b.children(".draggable").addClass("cached");autoCentered(b,a);b.css("opacity","0");g.stop();setDragObj(b)},error:function(){g.stop()}})})}
function clearDesign(){!(0<$(".layout_corner").children(".spinner").length)&&0!=$(".canvas_appended").length&&($("body").append('<div class="modalOverlay"></div>'),new Messi("\u60a8\u78ba\u5b9a\u8981\u6e05\u9664\u8a2d\u8a08\u55ce\uff1f\u6240\u6709\u7684\u5716\u7247\u5c07\u6703\u88ab\u6e05\u7a7a\uff01",{title:"\u6e05\u9664\u5167\u5bb9",buttons:[{id:0,label:"Yes",val:"Y"},{id:1,label:"No",val:"N"}],callback:function(a){"Y"===a&&($(".layout_corner").length&&$(".layout_corner").children(".draggable").each(function(){$(this).remove();
$(this)[0]=null}),$(".canvas_appended").length&&$(".canvas_appended").each(function(){$(this).remove();$(this)[0]=null}));$(".modalOverlay").remove();$(".layout_corner").animate({opacity:CORNER_OPT})}}))}function styleOnload(a,b){a.attachEvent?a.attachEvent("onload",b):setTimeout(function(){poll(a,b)},0)}
function poll(a,b){if(!b.isCalled){var c=!1;if(/webkit/i.test(navigator.userAgent))a.sheet&&(c=!0);else if(a.sheet)try{a.sheet.cssRules&&(c=!0)}catch(g){1E3===g.code&&(c=!0)}c?setTimeout(function(){b()},1):setTimeout(function(){poll(a,b)},1)}}var keys=[37,38,39,40];function preventDefault(a){a=a||window.event;a.preventDefault&&a.preventDefault();a.returnValue=!1}function keydown(a){for(var b=keys.length;b--;)if(a.keyCode===keys[b]){preventDefault(a);break}}function wheel(a){preventDefault(a)}
function disable_scroll(){window.addEventListener&&window.addEventListener("DOMMouseScroll",wheel,!1);window.onmousewheel=document.onmousewheel=wheel;document.onkeydown=keydown}function enable_scroll(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",wheel,!1);window.onmousewheel=document.onmousewheel=document.onkeydown=null};